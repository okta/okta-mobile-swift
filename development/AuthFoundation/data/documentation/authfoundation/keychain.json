{"primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Keychain"}],"languages":["swift"],"platforms":["macOS"]}]},{"kind":"content","content":[{"anchor":"overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"This struct represents a collection of similar objects that can be used to represent keychain items, searches, and search results, with the goal of simplifying keychain operations in a more expressive way."}]},{"type":"aside","style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"At this time, only Generic Password items are supported by this struct."}]}]},{"anchor":"Creating-Keychain-Items","level":2,"type":"heading","text":"Creating Keychain Items"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"reference","isActive":true,"identifier":"doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain\/Item"},{"type":"text","text":" struct represents individual items in the keychain. It can be used to create new items, and is returned as a result when getting an existing item."}]},{"type":"codeListing","syntax":"swift","code":["let data = \"My Secret\".data(using: .utf8)","let item = Keychain.Item(account: \"userId\",","                         service: \"com.example.myService\",","                         accessibility: .afterFirstUnlockThisDeviceOnly,","                         value: data!)","let savedItem = try item.save()"]},{"anchor":"Getting-an-Individual-Keychain-Item","level":2,"type":"heading","text":"Getting an Individual Keychain Item"},{"type":"paragraph","inlineContent":[{"type":"text","text":"When you know the exact account you would like to retrieve, you can perform a search to get an individual "},{"type":"reference","isActive":true,"identifier":"doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain\/Item"},{"type":"text","text":". To do this, you use the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain\/Search\/get(prompt:authenticationContext:)"},{"type":"text","text":" method."}]},{"type":"codeListing","syntax":"swift","code":["let search = Keychain.Search(account: \"userId\",","                             service: \"com.example.myService\")","let item = try search.get()"]},{"anchor":"Searching-for-Keychain-Items","level":2,"type":"heading","text":"Searching for Keychain Items"},{"type":"paragraph","inlineContent":[{"type":"text","text":"When you need to get a list of keychain items, you can use the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain\/Search\/list()"},{"type":"text","text":" method to get a list of results. The items in this search do not request the secret data stored within the items, meaning it should be safe to perform without triggering biometric prompts or encountering other accessibility restrictions."}]},{"type":"codeListing","syntax":"swift","code":["let search = Keychain.Search(account: \"userId\",","                             service: \"com.example.myService\")","for result in try search.list() {","    \/\/ Do something with the result","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"reference","isActive":true,"identifier":"doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain\/Search\/Result"},{"type":"text","text":" type represents individual results. This contains the public information for each item."}]},{"anchor":"Deleting-Keychain-Items","level":2,"type":"heading","text":"Deleting Keychain Items"},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can delete individual keychain items from either a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain\/Item"},{"type":"text","text":" or "},{"type":"reference","isActive":true,"identifier":"doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain\/Search\/Result"},{"type":"text","text":" instance."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"For example, to delete an item:"}]},{"type":"codeListing","syntax":"swift","code":["let search = Keychain.Search(account: \"userId\",","                             service: \"com.example.myService\")","let item = try search.get()","try item.delete()"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Or when you have an individual search result, you can perform a deletion at that time."}]},{"type":"codeListing","syntax":"swift","code":["let search = Keychain.Search(account: \"userId\",","                             service: \"com.example.myService\")","if let result = try search.list().first {","    try result.delete()","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you wish to delete multiple items, you can perform a delete on the Search itself. For example, to delete all items within a given service:"}]},{"type":"codeListing","syntax":"swift","code":["try Keychain.Search(service: \"com.example.myService\").delete()"]},{"anchor":"Updating-Keychain-Items","level":2,"type":"heading","text":"Updating Keychain Items"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Several objects also support the ability to be updated, for example "},{"type":"reference","isActive":true,"identifier":"doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain\/Item\/update(_:authenticationContext:)"},{"type":"text","text":" and "},{"type":"reference","isActive":true,"identifier":"doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain\/Search\/Result\/update(_:authenticationContext:)"},{"type":"text","text":".  To do this, you supply a new "},{"type":"reference","isActive":true,"identifier":"doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain\/Item"},{"type":"text","text":" to be used when updating and replacing the old item."}]},{"type":"codeListing","syntax":"swift","code":["let oldItem = Keychain.Search(account: \"userId\",","                              service: \"com.example.myService\").get()","let newItem = Keychain.Item(account: \"userId\",","                            service: \"com.example.myService\",","                            value: \"New Value\".data(using: .utf8)!)","try oldItem.update(newItem)"]},{"anchor":"Working-with-Keychain-Accessibility-and-Access-Control","level":2,"type":"heading","text":"Working with Keychain Accessibility and Access Control"},{"type":"paragraph","inlineContent":[{"type":"text","text":"One of the more complex parts of using the keychain is controlling keychain accessibility, defining access control, and working with Local Authentication contexts."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"To simplify this process, the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain\/Accessibility"},{"type":"text","text":" enum is provided to simplify how accessibility is defined.  This can be used when creating a new "},{"type":"reference","isActive":true,"identifier":"doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain\/Item"},{"type":"text","text":" as well as when updating a keychain item (for example, to change the keychain accessibility of an existing item)."}]},{"type":"codeListing","syntax":"swift","code":["let data = \"My Secret\".data(using: .utf8)","let item = Keychain.Item(account: \"userId\",","                         accessibility: .afterFirstUnlockThisDeviceOnly,","                         value: data!)","let savedItem = try item.save()"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"In a similar fashion, you can pass a "},{"type":"codeVoice","code":"SecAccessControl"},{"type":"text","text":" instance when saving an item, to define custom access settings such as biometric, user presence, etc."}]},{"anchor":"Biometric-Prompts-and-Authentication-Context","level":2,"type":"heading","text":"Biometric Prompts and Authentication Context"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Many operations, such as "},{"type":"reference","isActive":true,"identifier":"doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain\/Search\/get(prompt:authenticationContext:)"},{"type":"text","text":", "},{"type":"reference","isActive":true,"identifier":"doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain\/Search\/Result\/get(prompt:authenticationContext:)"},{"type":"text","text":", or "},{"type":"reference","isActive":true,"identifier":"doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain\/Search\/Result\/update(_:authenticationContext:)"},{"type":"text","text":", can accept either a user-facing message, and an authentication context, that can be used to help with prompting the user for biometric access.  The prompt is used when asking the user for FaceID or TouchID access, to explain to the user why they need to provide access."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The authentication context, from the LocalAuthentication framework, can additionally be supplied to further provide controls over how and when biometric propts are provided to the user."}]}]}],"schemaVersion":{"major":0,"minor":2,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/authfoundation\/keychain"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Defines convenience mechanisms for interacting with the keychain, including searching, creating, and deleting keychain items."}],"kind":"symbol","metadata":{"fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Keychain"}],"title":"Keychain","roleHeading":"Structure","role":"symbol","symbolKind":"struct","externalID":"s:14AuthFoundation8KeychainV","modules":[{"name":"AuthFoundation"}],"navigatorTitle":[{"kind":"identifier","text":"Keychain"}]},"hierarchy":{"paths":[["doc:\/\/AuthFoundation\/documentation\/AuthFoundation"]]},"topicSections":[{"title":"Structures","identifiers":["doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain\/Item","doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain\/Search"]},{"title":"Enumerations","identifiers":["doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain\/Accessibility"]}],"references":{"doc://AuthFoundation/documentation/AuthFoundation/Keychain":{"role":"symbol","title":"Keychain","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Keychain"}],"abstract":[{"type":"text","text":"Defines convenience mechanisms for interacting with the keychain, including searching, creating, and deleting keychain items."}],"identifier":"doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Keychain"}],"url":"\/documentation\/authfoundation\/keychain"},"doc://AuthFoundation/documentation/AuthFoundation/Keychain/Search/list()":{"role":"symbol","title":"list()","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"list"},{"kind":"text","text":"() "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> ["},{"kind":"typeIdentifier","text":"Keychain","preciseIdentifier":"s:14AuthFoundation8KeychainV"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Search","preciseIdentifier":"s:14AuthFoundation8KeychainV6SearchV"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Result","preciseIdentifier":"s:14AuthFoundation8KeychainV6SearchV6ResultV"},{"kind":"text","text":"]"}],"abstract":[{"type":"text","text":"Returns the list of keychain items matching this search criteria."}],"identifier":"doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain\/Search\/list()","kind":"symbol","type":"topic","url":"\/documentation\/authfoundation\/keychain\/search\/list()"},"doc://AuthFoundation/documentation/AuthFoundation/Keychain/Search/Result":{"role":"symbol","title":"Keychain.Search.Result","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Result"}],"abstract":[{"type":"text","text":"An individual result within a keychain search."}],"identifier":"doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain\/Search\/Result","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Result"}],"url":"\/documentation\/authfoundation\/keychain\/search\/result"},"doc://AuthFoundation/documentation/AuthFoundation/Keychain/Search/Result/update(_:authenticationContext:)":{"role":"symbol","title":"update(_:authenticationContext:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"update"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"Keychain","preciseIdentifier":"s:14AuthFoundation8KeychainV"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Item","preciseIdentifier":"s:14AuthFoundation8KeychainV4ItemV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"authenticationContext"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"KeychainAuthenticationContext","preciseIdentifier":"s:14AuthFoundation29KeychainAuthenticationContextP"},{"kind":"text","text":"?) "},{"kind":"keyword","text":"throws"}],"abstract":[{"type":"text","text":"Updates the keychain item with the values supplied in the included item."}],"identifier":"doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain\/Search\/Result\/update(_:authenticationContext:)","kind":"symbol","type":"topic","url":"\/documentation\/authfoundation\/keychain\/search\/result\/update(_:authenticationcontext:)"},"doc://AuthFoundation/documentation/AuthFoundation/Keychain/Accessibility":{"role":"symbol","title":"Keychain.Accessibility","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"Accessibility"}],"abstract":[{"type":"text","text":"Defines the accessibility level for keychain items."}],"identifier":"doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain\/Accessibility","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Accessibility"}],"url":"\/documentation\/authfoundation\/keychain\/accessibility"},"doc://AuthFoundation/documentation/AuthFoundation/Keychain/Search":{"role":"symbol","title":"Keychain.Search","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Search"}],"abstract":[{"type":"text","text":"Defines a search for keychain items."}],"identifier":"doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain\/Search","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Search"}],"url":"\/documentation\/authfoundation\/keychain\/search"},"doc://AuthFoundation/documentation/AuthFoundation/Keychain/Search/Result/get(prompt:authenticationContext:)":{"role":"symbol","title":"get(prompt:authenticationContext:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"get"},{"kind":"text","text":"("},{"kind":"externalParam","text":"prompt"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":"?, "},{"kind":"externalParam","text":"authenticationContext"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"KeychainAuthenticationContext","preciseIdentifier":"s:14AuthFoundation29KeychainAuthenticationContextP"},{"kind":"text","text":"?) "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"Keychain","preciseIdentifier":"s:14AuthFoundation8KeychainV"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Item","preciseIdentifier":"s:14AuthFoundation8KeychainV4ItemV"}],"abstract":[{"type":"text","text":"Fetches the complete "},{"type":"reference","isActive":true,"identifier":"doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain\/Item"},{"type":"text","text":" for this individual search result."}],"identifier":"doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain\/Search\/Result\/get(prompt:authenticationContext:)","kind":"symbol","type":"topic","url":"\/documentation\/authfoundation\/keychain\/search\/result\/get(prompt:authenticationcontext:)"},"doc://AuthFoundation/documentation/AuthFoundation/Keychain/Item/update(_:authenticationContext:)":{"role":"symbol","title":"update(_:authenticationContext:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"update"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"Keychain","preciseIdentifier":"s:14AuthFoundation8KeychainV"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Item","preciseIdentifier":"s:14AuthFoundation8KeychainV4ItemV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"authenticationContext"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"KeychainAuthenticationContext","preciseIdentifier":"s:14AuthFoundation29KeychainAuthenticationContextP"},{"kind":"text","text":"?) "},{"kind":"keyword","text":"throws"}],"abstract":[{"type":"text","text":"Updates the keychain item with the values supplied in the included item."}],"identifier":"doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain\/Item\/update(_:authenticationContext:)","kind":"symbol","type":"topic","url":"\/documentation\/authfoundation\/keychain\/item\/update(_:authenticationcontext:)"},"doc://AuthFoundation/documentation/AuthFoundation/Keychain/Item":{"role":"symbol","title":"Keychain.Item","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Item"}],"abstract":[{"type":"text","text":"Defines an individual keychain item. This may be created using the designated initializer for the purposes of saving a new keychain item, or may be created as the result of getting a preexisting item from the keychain."}],"identifier":"doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain\/Item","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Item"}],"url":"\/documentation\/authfoundation\/keychain\/item"},"doc://AuthFoundation/documentation/AuthFoundation/Keychain/Search/get(prompt:authenticationContext:)":{"role":"symbol","title":"get(prompt:authenticationContext:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"get"},{"kind":"text","text":"("},{"kind":"externalParam","text":"prompt"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":"?, "},{"kind":"externalParam","text":"authenticationContext"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"KeychainAuthenticationContext","preciseIdentifier":"s:14AuthFoundation29KeychainAuthenticationContextP"},{"kind":"text","text":"?) "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"Keychain","preciseIdentifier":"s:14AuthFoundation8KeychainV"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Item","preciseIdentifier":"s:14AuthFoundation8KeychainV4ItemV"}],"abstract":[{"type":"text","text":"Gets the first item matching this search criteria."}],"identifier":"doc:\/\/AuthFoundation\/documentation\/AuthFoundation\/Keychain\/Search\/get(prompt:authenticationContext:)","kind":"symbol","type":"topic","url":"\/documentation\/authfoundation\/keychain\/search\/get(prompt:authenticationcontext:)"},"doc://AuthFoundation/documentation/AuthFoundation":{"role":"collection","title":"AuthFoundation","abstract":[{"type":"text","text":"Library that provides foundational features used by Oktaâ€™s authentication libraries, as well as APIs used to work with tokens and user credentials."}],"identifier":"doc:\/\/AuthFoundation\/documentation\/AuthFoundation","kind":"symbol","type":"topic","url":"\/documentation\/authfoundation"}}}