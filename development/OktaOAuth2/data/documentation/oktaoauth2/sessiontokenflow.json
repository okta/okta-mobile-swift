{"primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"kind":"keyword","text":"final"},{"kind":"text","text":" "},{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"SessionTokenFlow"}],"languages":["swift"],"platforms":["macOS"]}]},{"kind":"content","content":[{"anchor":"overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"This flow is typically used in conjunction with the "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/okta\/okta-auth-swift"},{"type":"text","text":". For native authentication using the Okta Identity Engine (OIE), please use the "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/okta\/okta-idx-swift"},{"type":"text","text":"."}]},{"anchor":"Usage","level":2,"type":"heading","text":"Usage"},{"type":"paragraph","inlineContent":[{"type":"text","text":"When implementing OktaAuthNative, the "},{"type":"codeVoice","code":"onStatusChange"},{"type":"text","text":" argument is invoked for various state changes throughout authentication. Once the "},{"type":"codeVoice","code":".success"},{"type":"text","text":" state is received, the returned status contains a session token which can be exchanged for full access tokens. Within that handler, you can use the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/start(with:context:)"},{"type":"text","text":" function to receive a token."}]},{"type":"codeListing","syntax":"swift","code":["switch status.statusType {","case .success:","    guard let status = status as? OktaAuthStatusSuccess,","          let sessionToken = status.sessionToken","    else {","        \/\/ Handle this error condition","        return","    }","    ","    let flow: SessionTokenFlow","    do {","        \/\/ Use the convenience initializer which reads","        \/\/ client configuration from `Okta.plist`.","        flow = try SessionTokenFlow()","    } catch {","        \/\/ Handle this error","        return","    }","    ","    Task {","        do {","            let token = try await flow.start(with: sessionToken)","            try Credential.store(token)","        } catch {","            \/\/ Handle the error","        }","    }","","default:","    \/\/ Handle other statuses","}"]}]}],"schemaVersion":{"major":0,"minor":2,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/oktaoauth2\/sessiontokenflow"],"traits":[{"interfaceLanguage":"swift"}]}],"relationshipsSections":[{"identifiers":["doc:\/\/OktaOAuth2\/14AuthFoundation17APIClientDelegateP","doc:\/\/OktaOAuth2\/14AuthFoundation18AuthenticationFlowP","doc:\/\/OktaOAuth2\/14AuthFoundation20OAuth2ClientDelegateP","doc:\/\/OktaOAuth2\/14AuthFoundation22UsesDelegateCollectionP"],"kind":"relationships","title":"Conforms To","type":"conformsTo"}],"identifier":{"url":"doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"An authentication flow class that exchanges a Session Token for access tokens."}],"kind":"symbol","metadata":{"fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"SessionTokenFlow"}],"title":"SessionTokenFlow","roleHeading":"Class","role":"symbol","symbolKind":"class","externalID":"s:10OktaOAuth216SessionTokenFlowC","modules":[{"name":"OktaOAuth2"}],"navigatorTitle":[{"kind":"identifier","text":"SessionTokenFlow"}]},"hierarchy":{"paths":[["doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2"]]},"topicSections":[{"title":"Initializers","identifiers":["doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/init()","doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/init(issuer:clientId:scopes:redirectUri:additionalParameters:)","doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/init(plist:)","doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/init(redirectUri:additionalParameters:client:)"]},{"title":"Instance Properties","identifiers":["doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/additionalParameters","doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/client","doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/delegateCollection","doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/isAuthenticating","doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/redirectUri"]},{"title":"Instance Methods","identifiers":["doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/reset()","doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/start(with:context:)","doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/start(with:context:completion:)"]},{"title":"Default Implementations","identifiers":["doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/APIClientDelegate-Implementations","doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/OAuth2ClientDelegate-Implementations","doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/UsesDelegateCollection-Implementations"],"generated":true}],"references":{"https://github.com/okta/okta-auth-swift":{"title":"classic Okta native authentication library","titleInlineContent":[{"type":"text","text":"classic Okta native authentication library"}],"type":"link","identifier":"https:\/\/github.com\/okta\/okta-auth-swift","url":"https:\/\/github.com\/okta\/okta-auth-swift"},"doc://OktaOAuth2/documentation/OktaOAuth2/SessionTokenFlow/client":{"role":"symbol","title":"client","fragments":[{"kind":"keyword","text":"let"},{"kind":"text","text":" "},{"kind":"identifier","text":"client"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"OAuth2Client","preciseIdentifier":"s:14AuthFoundation12OAuth2ClientC"}],"abstract":[{"type":"text","text":"The OAuth2Client this authentication flow will use."}],"identifier":"doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/client","kind":"symbol","type":"topic","url":"\/documentation\/oktaoauth2\/sessiontokenflow\/client"},"doc://OktaOAuth2/documentation/OktaOAuth2/SessionTokenFlow/start(with:context:)":{"role":"symbol","title":"start(with:context:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"start"},{"kind":"text","text":"("},{"kind":"externalParam","text":"with"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"kind":"externalParam","text":"context"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"AuthorizationCodeFlow","preciseIdentifier":"s:10OktaOAuth221AuthorizationCodeFlowC"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Context","preciseIdentifier":"s:10OktaOAuth221AuthorizationCodeFlowC7ContextV"},{"kind":"text","text":"?) "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"Token","preciseIdentifier":"s:14AuthFoundation5TokenC"}],"abstract":[{"type":"text","text":"Asynchronously authenticates with the given session token."}],"identifier":"doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/start(with:context:)","kind":"symbol","type":"topic","url":"\/documentation\/oktaoauth2\/sessiontokenflow\/start(with:context:)"},"doc://OktaOAuth2/14AuthFoundation17APIClientDelegateP":{"type":"unresolvable","title":"AuthFoundation.APIClientDelegate","identifier":"doc:\/\/OktaOAuth2\/14AuthFoundation17APIClientDelegateP"},"doc://OktaOAuth2/documentation/OktaOAuth2/SessionTokenFlow/additionalParameters":{"role":"symbol","title":"additionalParameters","fragments":[{"kind":"keyword","text":"let"},{"kind":"text","text":" "},{"kind":"identifier","text":"additionalParameters"},{"kind":"text","text":": ["},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":" : "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":"]?"}],"abstract":[{"type":"text","text":"Any additional query string parameters you would like to supply to the authorization server."}],"identifier":"doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/additionalParameters","kind":"symbol","type":"topic","url":"\/documentation\/oktaoauth2\/sessiontokenflow\/additionalparameters"},"doc://OktaOAuth2/documentation/OktaOAuth2":{"role":"collection","title":"OktaOAuth2","abstract":[{"type":"text","text":"Interact with Oktaâ€™s OAuth2 APIs to authenticate users, and interact with user resources."}],"identifier":"doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2","kind":"symbol","type":"topic","url":"\/documentation\/oktaoauth2"},"doc://OktaOAuth2/documentation/OktaOAuth2/SessionTokenFlow":{"role":"symbol","title":"SessionTokenFlow","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"SessionTokenFlow"}],"abstract":[{"type":"text","text":"An authentication flow class that exchanges a Session Token for access tokens."}],"identifier":"doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"SessionTokenFlow"}],"url":"\/documentation\/oktaoauth2\/sessiontokenflow"},"doc://OktaOAuth2/documentation/OktaOAuth2/SessionTokenFlow/delegateCollection":{"role":"symbol","title":"delegateCollection","fragments":[{"kind":"keyword","text":"let"},{"kind":"text","text":" "},{"kind":"identifier","text":"delegateCollection"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"DelegateCollection","preciseIdentifier":"s:14AuthFoundation18DelegateCollectionC"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"SessionTokenFlow","preciseIdentifier":"s:10OktaOAuth216SessionTokenFlowC"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Delegate","preciseIdentifier":"s:10OktaOAuth216SessionTokenFlowC8Delegatea"},{"kind":"text","text":">"}],"abstract":[],"identifier":"doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/delegateCollection","kind":"symbol","type":"topic","url":"\/documentation\/oktaoauth2\/sessiontokenflow\/delegatecollection"},"doc://OktaOAuth2/documentation/OktaOAuth2/SessionTokenFlow/init()":{"role":"symbol","title":"init()","fragments":[{"kind":"keyword","text":"convenience"},{"kind":"text","text":" "},{"kind":"identifier","text":"init"},{"kind":"text","text":"() "},{"kind":"keyword","text":"throws"}],"abstract":[{"type":"text","text":"Initializer that uses the configuration defined within the applicationâ€™s "},{"type":"codeVoice","code":"Okta.plist"},{"type":"text","text":" file."}],"identifier":"doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/init()","kind":"symbol","type":"topic","url":"\/documentation\/oktaoauth2\/sessiontokenflow\/init()"},"https://github.com/okta/okta-idx-swift":{"title":"Okta IDX library","titleInlineContent":[{"type":"text","text":"Okta IDX library"}],"type":"link","identifier":"https:\/\/github.com\/okta\/okta-idx-swift","url":"https:\/\/github.com\/okta\/okta-idx-swift"},"doc://OktaOAuth2/documentation/OktaOAuth2/SessionTokenFlow/reset()":{"role":"symbol","title":"reset()","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"reset"},{"kind":"text","text":"()"}],"abstract":[{"type":"text","text":"Resets the flow for later reuse."}],"identifier":"doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/reset()","kind":"symbol","type":"topic","url":"\/documentation\/oktaoauth2\/sessiontokenflow\/reset()"},"doc://OktaOAuth2/documentation/OktaOAuth2/SessionTokenFlow/UsesDelegateCollection-Implementations":{"role":"collectionGroup","title":"UsesDelegateCollection Implementations","abstract":[],"identifier":"doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/UsesDelegateCollection-Implementations","kind":"article","type":"topic","url":"\/documentation\/oktaoauth2\/sessiontokenflow\/usesdelegatecollection-implementations"},"doc://OktaOAuth2/documentation/OktaOAuth2/SessionTokenFlow/start(with:context:completion:)":{"role":"symbol","title":"start(with:context:completion:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"start"},{"kind":"text","text":"("},{"kind":"externalParam","text":"with"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"kind":"externalParam","text":"context"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"AuthorizationCodeFlow","preciseIdentifier":"s:10OktaOAuth221AuthorizationCodeFlowC"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Context","preciseIdentifier":"s:10OktaOAuth221AuthorizationCodeFlowC7ContextV"},{"kind":"text","text":"?, "},{"kind":"externalParam","text":"completion"},{"kind":"text","text":": (("},{"kind":"typeIdentifier","text":"Result","preciseIdentifier":"s:s6ResultO"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Token","preciseIdentifier":"s:14AuthFoundation5TokenC"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"OAuth2Error","preciseIdentifier":"s:14AuthFoundation11OAuth2ErrorO"},{"kind":"text","text":">) -> "},{"kind":"typeIdentifier","text":"Void","preciseIdentifier":"s:s4Voida"},{"kind":"text","text":")?)"}],"abstract":[{"type":"text","text":"Authenticates using the supplied session token."}],"identifier":"doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/start(with:context:completion:)","kind":"symbol","type":"topic","url":"\/documentation\/oktaoauth2\/sessiontokenflow\/start(with:context:completion:)"},"doc://OktaOAuth2/14AuthFoundation22UsesDelegateCollectionP":{"type":"unresolvable","title":"AuthFoundation.UsesDelegateCollection","identifier":"doc:\/\/OktaOAuth2\/14AuthFoundation22UsesDelegateCollectionP"},"doc://OktaOAuth2/14AuthFoundation18AuthenticationFlowP":{"type":"unresolvable","title":"AuthFoundation.AuthenticationFlow","identifier":"doc:\/\/OktaOAuth2\/14AuthFoundation18AuthenticationFlowP"},"doc://OktaOAuth2/14AuthFoundation20OAuth2ClientDelegateP":{"type":"unresolvable","title":"AuthFoundation.OAuth2ClientDelegate","identifier":"doc:\/\/OktaOAuth2\/14AuthFoundation20OAuth2ClientDelegateP"},"doc://OktaOAuth2/documentation/OktaOAuth2/SessionTokenFlow/APIClientDelegate-Implementations":{"role":"collectionGroup","title":"APIClientDelegate Implementations","abstract":[],"identifier":"doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/APIClientDelegate-Implementations","kind":"article","type":"topic","url":"\/documentation\/oktaoauth2\/sessiontokenflow\/apiclientdelegate-implementations"},"doc://OktaOAuth2/documentation/OktaOAuth2/SessionTokenFlow/init(redirectUri:additionalParameters:client:)":{"role":"symbol","title":"init(redirectUri:additionalParameters:client:)","fragments":[{"kind":"identifier","text":"init"},{"kind":"text","text":"("},{"kind":"externalParam","text":"redirectUri"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"URL","preciseIdentifier":"s:10Foundation3URLV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"additionalParameters"},{"kind":"text","text":": ["},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":" : "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":"]?, "},{"kind":"externalParam","text":"client"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"OAuth2Client","preciseIdentifier":"s:14AuthFoundation12OAuth2ClientC"},{"kind":"text","text":")"}],"abstract":[],"identifier":"doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/init(redirectUri:additionalParameters:client:)","kind":"symbol","type":"topic","url":"\/documentation\/oktaoauth2\/sessiontokenflow\/init(redirecturi:additionalparameters:client:)"},"doc://OktaOAuth2/documentation/OktaOAuth2/SessionTokenFlow/init(plist:)":{"role":"symbol","title":"init(plist:)","fragments":[{"kind":"keyword","text":"convenience"},{"kind":"text","text":" "},{"kind":"identifier","text":"init"},{"kind":"text","text":"("},{"kind":"externalParam","text":"plist"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"URL","preciseIdentifier":"s:10Foundation3URLV"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"}],"abstract":[{"type":"text","text":"Initializer that uses the configuration defined within the given file URL."}],"identifier":"doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/init(plist:)","kind":"symbol","type":"topic","url":"\/documentation\/oktaoauth2\/sessiontokenflow\/init(plist:)"},"doc://OktaOAuth2/documentation/OktaOAuth2/SessionTokenFlow/isAuthenticating":{"role":"symbol","title":"isAuthenticating","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"isAuthenticating"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"}],"abstract":[{"type":"text","text":"Indicates whether or not this flow is currently in the process of authenticating a user."}],"identifier":"doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/isAuthenticating","kind":"symbol","type":"topic","url":"\/documentation\/oktaoauth2\/sessiontokenflow\/isauthenticating"},"doc://OktaOAuth2/documentation/OktaOAuth2/SessionTokenFlow/redirectUri":{"role":"symbol","title":"redirectUri","fragments":[{"kind":"keyword","text":"let"},{"kind":"text","text":" "},{"kind":"identifier","text":"redirectUri"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"URL","preciseIdentifier":"s:10Foundation3URLV"}],"abstract":[{"type":"text","text":"The redirect URI defined for your client."}],"identifier":"doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/redirectUri","kind":"symbol","type":"topic","url":"\/documentation\/oktaoauth2\/sessiontokenflow\/redirecturi"},"doc://OktaOAuth2/documentation/OktaOAuth2/SessionTokenFlow/init(issuer:clientId:scopes:redirectUri:additionalParameters:)":{"role":"symbol","title":"init(issuer:clientId:scopes:redirectUri:additionalParameters:)","fragments":[{"kind":"keyword","text":"convenience"},{"kind":"text","text":" "},{"kind":"identifier","text":"init"},{"kind":"text","text":"("},{"kind":"externalParam","text":"issuer"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"URL","preciseIdentifier":"s:10Foundation3URLV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"clientId"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"kind":"externalParam","text":"scopes"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"kind":"externalParam","text":"redirectUri"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"URL","preciseIdentifier":"s:10Foundation3URLV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"additionalParameters"},{"kind":"text","text":": ["},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":" : "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":"]?)"}],"abstract":[{"type":"text","text":"Convenience initializer to construct an authentication flow from variables."}],"identifier":"doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/init(issuer:clientId:scopes:redirectUri:additionalParameters:)","kind":"symbol","type":"topic","url":"\/documentation\/oktaoauth2\/sessiontokenflow\/init(issuer:clientid:scopes:redirecturi:additionalparameters:)"},"doc://OktaOAuth2/documentation/OktaOAuth2/SessionTokenFlow/OAuth2ClientDelegate-Implementations":{"role":"collectionGroup","title":"OAuth2ClientDelegate Implementations","abstract":[],"identifier":"doc:\/\/OktaOAuth2\/documentation\/OktaOAuth2\/SessionTokenFlow\/OAuth2ClientDelegate-Implementations","kind":"article","type":"topic","url":"\/documentation\/oktaoauth2\/sessiontokenflow\/oauth2clientdelegate-implementations"}}}