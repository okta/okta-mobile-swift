{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"There are many circumstances in which you may want to monitor, or alter, network requests as they are sent from within the SDK. There are several facilities built into AuthFoundation and its associated libraries that enables developers to interact with the network in a flexible manner."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"All network interactions within these SDKs are built around the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/APIClient"},{"type":"text","text":" protocol. For example, the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/OAuth2Client"},{"type":"text","text":" itself implements the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/APIClient"},{"type":"text","text":" protocol. As a result, each client instance conforms to these same capabilities, which means they each support the use of the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/APIClientDelegate"},{"type":"text","text":"."}]},{"anchor":"Using-APIClientDelegate-to-monitor-network-operations","level":2,"type":"heading","text":"Using APIClientDelegate to monitor network operations"},{"type":"paragraph","inlineContent":[{"type":"text","text":"For more information about this delegate protocol, see the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/APIClientDelegate"},{"type":"text","text":" protocol definition for its specific uses."}]},{"anchor":"Modifying-outgoing-network-requests","level":3,"type":"heading","text":"Modifying outgoing network requests"},{"type":"paragraph","inlineContent":[{"type":"text","text":"If your application needs to monitor outgoing network requests, the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/APIClientDelegate\/api(client:willSend:)-9cnzq"},{"type":"text","text":" method can be used to observe when network requests will be sent."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"More importantly, the "},{"type":"codeVoice","code":"URLRequest"},{"type":"text","text":" argument supplied to this delegate method is supplied as an "},{"type":"codeVoice","code":"inout"},{"type":"text","text":" value. This allows you to not only observe which requests are being made (e.g. to allow analytics or logging to be used), but they can be altered before being sent over the network."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"As an example, here’s how you might be able to add your own outgoing HTTP request headers."}]},{"type":"codeListing","syntax":"swift","code":["extension MyClass: APIClientDelegate {","    func api(client: APIClient, willSend request: inout URLRequest) {","        request.addValue(\"CustomValue\", forHTTPHeaderField: \"x-My-Header\")","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"When you add your delegate (e.g. using "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/OAuth2Client\/add(delegate:)"},{"type":"text","text":"), your class can then intercept these messages and monitor, or alter, outgoing requests."}]},{"anchor":"Monitoring-outgoing-network-requests","level":3,"type":"heading","text":"Monitoring outgoing network requests"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Building upon the previous section, another method "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/APIClientDelegate"},{"type":"text","text":" supports is handling responses to requests, through the use of "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/APIClientDelegate\/api(client:didSend:received:)-10od2"},{"type":"text","text":". Information about the raw response, including "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/APIResponse\/RateLimit"},{"type":"text","text":", associated links (e.g. next, previous, and current pagination results), and information about the request ID (which can be used for debugging purposes)."}]}]}],"schemaVersion":{"major":0,"minor":2,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/authfoundation\/customizingnetworkrequests"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/CustomizingNetworkRequests","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Manage or monitor network requests sent by the Okta Mobile SDK."}],"kind":"article","metadata":{"roleHeading":"Article","title":"Customizing Network Requests","role":"article","modules":[{"name":"AuthFoundation"}]},"hierarchy":{"paths":[["doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation"]]},"seeAlsoSections":[{"title":"Customizations","identifiers":["doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/TimeCoordinator","doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/CredentialCoordinator","doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/CredentialDataSource","doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/CredentialDataSourceDelegate","doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/TokenStorage","doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/TokenStorageDelegate","doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/JWKValidator","doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/TokenHashValidator","doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/IDTokenValidator"],"generated":true}],"references":{"doc://com.okta.mobile.authfoundation/documentation/AuthFoundation/APIClient":{"role":"symbol","title":"APIClient","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"APIClient"}],"abstract":[{"type":"text","text":"Protocol defining the interfaces and capabilities that API clients can conform to."}],"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/APIClient","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"APIClient"}],"url":"\/documentation\/authfoundation\/apiclient"},"doc://com.okta.mobile.authfoundation/documentation/AuthFoundation/CredentialCoordinator":{"role":"symbol","title":"CredentialCoordinator","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"CredentialCoordinator"}],"abstract":[{"type":"text","text":"Represents the class that manages the relationship between "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/TokenStorage"},{"type":"text","text":" and "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/CredentialDataSource"},{"type":"text","text":" instances."}],"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/CredentialCoordinator","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"CredentialCoordinator"}],"url":"\/documentation\/authfoundation\/credentialcoordinator"},"doc://com.okta.mobile.authfoundation/documentation/AuthFoundation/TokenStorage":{"role":"symbol","title":"TokenStorage","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"TokenStorage"}],"abstract":[{"type":"text","text":"Protocol used to customize the way tokens are stored, updated, and removed throughout the lifecycle of an application."}],"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/TokenStorage","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"TokenStorage"}],"url":"\/documentation\/authfoundation\/tokenstorage"},"doc://com.okta.mobile.authfoundation/documentation/AuthFoundation/APIClientDelegate":{"role":"symbol","title":"APIClientDelegate","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"APIClientDelegate"}],"abstract":[{"type":"text","text":"Protocol that delegates of APIClient instances can conform to."}],"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/APIClientDelegate","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"APIClientDelegate"}],"url":"\/documentation\/authfoundation\/apiclientdelegate"},"doc://com.okta.mobile.authfoundation/documentation/AuthFoundation/Credential":{"role":"symbol","title":"Credential","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"Credential"}],"abstract":[{"type":"text","text":"Convenience object that provides methods and properties for using a user’s authentication tokens."}],"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/Credential","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Credential"}],"url":"\/documentation\/authfoundation\/credential"},"doc://com.okta.mobile.authfoundation/documentation/AuthFoundation/CredentialDataSource":{"role":"symbol","title":"CredentialDataSource","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"CredentialDataSource"}],"abstract":[{"type":"text","text":"Protocol that enables a developer to interact with, and override, the default behavior for the lifecycle of "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/Credential"},{"type":"text","text":" instances."}],"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/CredentialDataSource","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"CredentialDataSource"}],"url":"\/documentation\/authfoundation\/credentialdatasource"},"doc://com.okta.mobile.authfoundation/documentation/AuthFoundation/JWKValidator":{"role":"symbol","title":"JWKValidator","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"JWKValidator"}],"abstract":[{"type":"text","text":"Protocol used to implement JWK token validation."}],"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/JWKValidator","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"JWKValidator"}],"url":"\/documentation\/authfoundation\/jwkvalidator"},"doc://com.okta.mobile.authfoundation/documentation/AuthFoundation/OAuth2Client/add(delegate:)":{"role":"symbol","title":"add(delegate:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"add"},{"kind":"text","text":"("},{"kind":"externalParam","text":"delegate"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Delegate","preciseIdentifier":"s:14AuthFoundation22UsesDelegateCollectionP0D0Qa"},{"kind":"text","text":")"}],"abstract":[],"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/OAuth2Client\/add(delegate:)","kind":"symbol","type":"topic","url":"\/documentation\/authfoundation\/oauth2client\/add(delegate:)"},"doc://com.okta.mobile.authfoundation/documentation/AuthFoundation":{"role":"collection","title":"AuthFoundation","abstract":[{"type":"text","text":"Library that provides foundational features used by Okta’s authentication libraries, as well as APIs used to work with tokens and user credentials."}],"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation","kind":"symbol","type":"topic","url":"\/documentation\/authfoundation"},"doc://com.okta.mobile.authfoundation/documentation/AuthFoundation/IDTokenValidator":{"role":"symbol","title":"IDTokenValidator","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"IDTokenValidator"}],"abstract":[{"type":"text","text":"Protocol used to implement OpenID token validation."}],"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/IDTokenValidator","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"IDTokenValidator"}],"url":"\/documentation\/authfoundation\/idtokenvalidator"},"doc://com.okta.mobile.authfoundation/documentation/AuthFoundation/TimeCoordinator":{"role":"symbol","title":"TimeCoordinator","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"TimeCoordinator"}],"abstract":[{"type":"text","text":"Protocol used to return dates and times coordinated against trusted sources."}],"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/TimeCoordinator","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"TimeCoordinator"}],"url":"\/documentation\/authfoundation\/timecoordinator"},"doc://com.okta.mobile.authfoundation/documentation/AuthFoundation/OAuth2Client":{"role":"symbol","title":"OAuth2Client","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"OAuth2Client"}],"abstract":[{"type":"text","text":"An OAuth2 client, used to interact with a given authorization server."}],"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/OAuth2Client","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"OAuth2Client"}],"url":"\/documentation\/authfoundation\/oauth2client"},"doc://com.okta.mobile.authfoundation/documentation/AuthFoundation/APIResponse/RateLimit":{"role":"symbol","title":"APIResponse.RateLimit","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"RateLimit"}],"abstract":[{"type":"text","text":"Describes information related to the organization’s current rate limit."}],"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/APIResponse\/RateLimit","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"RateLimit"}],"url":"\/documentation\/authfoundation\/apiresponse\/ratelimit"},"doc://com.okta.mobile.authfoundation/documentation/AuthFoundation/APIClientDelegate/api(client:willSend:)-9cnzq":{"role":"symbol","title":"api(client:willSend:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"api"},{"kind":"text","text":"("},{"kind":"externalParam","text":"client"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"APIClient","preciseIdentifier":"s:14AuthFoundation9APIClientP"},{"kind":"text","text":", "},{"kind":"externalParam","text":"willSend"},{"kind":"text","text":": "},{"kind":"keyword","text":"inout"},{"kind":"text","text":" "},{"kind":"typeIdentifier","text":"URLRequest","preciseIdentifier":"s:10Foundation10URLRequestV"},{"kind":"text","text":")"}],"abstract":[{"type":"text","text":"Invoked immediately prior to a URLRequest being converted to a DataTask."}],"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/APIClientDelegate\/api(client:willSend:)-9cnzq","kind":"symbol","type":"topic","url":"\/documentation\/authfoundation\/apiclientdelegate\/api(client:willsend:)-9cnzq"},"doc://com.okta.mobile.authfoundation/documentation/AuthFoundation/TokenStorageDelegate":{"role":"symbol","title":"TokenStorageDelegate","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"TokenStorageDelegate"}],"abstract":[{"type":"text","text":"Protocol that custom "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/TokenStorage"},{"type":"text","text":" instances are required to communicate changes to."}],"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/TokenStorageDelegate","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"TokenStorageDelegate"}],"url":"\/documentation\/authfoundation\/tokenstoragedelegate"},"doc://com.okta.mobile.authfoundation/documentation/AuthFoundation/TokenHashValidator":{"role":"symbol","title":"TokenHashValidator","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"TokenHashValidator"}],"abstract":[{"type":"text","text":"Protocol used to implement token validation using either the "},{"type":"codeVoice","code":"at_hash"},{"type":"text","text":" or "},{"type":"codeVoice","code":"ds_hash"},{"type":"text","text":" properties from an ID token."}],"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/TokenHashValidator","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"TokenHashValidator"}],"url":"\/documentation\/authfoundation\/tokenhashvalidator"},"doc://com.okta.mobile.authfoundation/documentation/AuthFoundation/CredentialDataSourceDelegate":{"role":"symbol","title":"CredentialDataSourceDelegate","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"CredentialDataSourceDelegate"}],"abstract":[{"type":"text","text":"Protocol that a custom "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/CredentialDataSource"},{"type":"text","text":" instances are required to communicate changes to."}],"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/CredentialDataSourceDelegate","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"CredentialDataSourceDelegate"}],"url":"\/documentation\/authfoundation\/credentialdatasourcedelegate"},"doc://com.okta.mobile.authfoundation/documentation/AuthFoundation/APIClientDelegate/api(client:didSend:received:)-10od2":{"role":"symbol","title":"api(client:didSend:received:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"api"},{"kind":"text","text":"("},{"kind":"externalParam","text":"client"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"APIClient","preciseIdentifier":"s:14AuthFoundation9APIClientP"},{"kind":"text","text":", "},{"kind":"externalParam","text":"didSend"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"URLRequest","preciseIdentifier":"s:10Foundation10URLRequestV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"received"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"APIClientError","preciseIdentifier":"s:14AuthFoundation14APIClientErrorO"},{"kind":"text","text":")"}],"abstract":[],"identifier":"doc:\/\/com.okta.mobile.authfoundation\/documentation\/AuthFoundation\/APIClientDelegate\/api(client:didSend:received:)-10od2","kind":"symbol","type":"topic","url":"\/documentation\/authfoundation\/apiclientdelegate\/api(client:didsend:received:)-10od2"}}}